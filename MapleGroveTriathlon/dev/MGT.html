<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.6.1/mapbox-gl.js"></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.6.1/mapbox-gl.css" rel="stylesheet">
    <style>
        body { margin: 0; padding: 0; }
        #map { position: absolute; top: 0; bottom: 0; width: 100%; }
    </style>
</head>
<body>

<div id="map"></div>

<script>
mapboxgl.accessToken = 'pk.eyJ1IjoibWF0dGllZ2lzc2VsYmVjayIsImEiOiJjbG5hcmhvOWMwMHVhMmtsaW04M3dqb2N6In0.KDF-cF60UnFy3r1hGWlWfQ';

// Coordinates of the route
const routeCoordinates = [
[-93.494852, 45.109165],
          [-93.494814, 45.109145],
          [-93.494698, 45.109117],
          [-93.492402, 45.109132],
          [-93.49226, 45.109127],
          [-93.492263, 45.109213],
          [-93.492231, 45.110984],
          [-93.492223, 45.111741],
          [-93.492241, 45.112766],
          [-93.492241, 45.112927],
          [-93.492233, 45.113242],
          [-93.492217, 45.114253],
          [-93.492224, 45.114486],
          [-93.492247, 45.114648],
          [-93.492278, 45.114817],
          [-93.492372, 45.115242],
          [-93.492395, 45.115371],
          [-93.492385, 45.115618],
          [-93.492396, 45.115929],
          [-93.492394, 45.115983],
          [-93.492389, 45.116147],
          [-93.492385, 45.116308],
          [-93.492385, 45.116326],
          [-93.49238, 45.116415],
          [-93.492407, 45.116415],
          [-93.492568, 45.116418],
          [-93.492568, 45.116418],
          [-93.492675, 45.11642],
          [-93.492702, 45.116421],
          [-93.492768, 45.116422],
          [-93.496064, 45.116487],
          [-93.498531, 45.116535],
          [-93.498893, 45.11654],
          [-93.500036, 45.116562],
          [-93.500676, 45.116575],
          [-93.502354, 45.116606],
          [-93.502468, 45.116607],
          [-93.503881, 45.116604],
          [-93.504121, 45.116604],
          [-93.505678, 45.116594],
          [-93.506959, 45.116589],
          [-93.510403, 45.11657],
          [-93.510757, 45.116571],
          [-93.511936, 45.116569],
          [-93.512136, 45.116567],
          [-93.512293, 45.11656],
          [-93.512424, 45.116544],
          [-93.512528, 45.116528],
          [-93.512668, 45.116499],
          [-93.512857, 45.116498],
          [-93.512936, 45.11648],
          [-93.513063, 45.116433],
          [-93.513192, 45.116382],
          [-93.513323, 45.116318],
          [-93.51344, 45.116247],
          [-93.513536, 45.116179],
          [-93.513639, 45.116095],
          [-93.51373, 45.116015],
          [-93.51375, 45.115997],
          [-93.513806, 45.115941],
          [-93.513928, 45.116006],
          [-93.514399, 45.116191],
          [-93.514736, 45.116304],
          [-93.515157, 45.11642],
          [-93.515688, 45.11652],
          [-93.515721, 45.116522],
          [-93.515928, 45.116538],
          [-93.516138, 45.116523],
          [-93.516474, 45.116535],
          [-93.517183, 45.116539],
          [-93.518958, 45.116529],
          [-93.521173, 45.11653],
          [-93.521246, 45.116535],
          [-93.521368, 45.116544],
          [-93.521522, 45.116568],
          [-93.521678, 45.116608],
          [-93.52184, 45.116676],
          [-93.521944, 45.116747],
          [-93.521975, 45.116774],
          [-93.522057, 45.116847],
          [-93.522145, 45.116964],
          [-93.522208, 45.117082],
          [-93.522232, 45.117197],
          [-93.522239, 45.11723],
          [-93.522246, 45.117337],
          [-93.522244, 45.117929],
          [-93.522245, 45.118197],
          [-93.522235, 45.118497],
          [-93.522219, 45.118959],
          [-93.52222, 45.119004],
          [-93.522234, 45.119765],
          [-93.522235, 45.119796],
          [-93.522213, 45.120552],
          [-93.522208, 45.121377],
          [-93.522211, 45.122699],
          [-93.522193, 45.123798],
          [-93.522193, 45.123803],
          [-93.522192, 45.12406],
          [-93.522188, 45.124702],
          [-93.522187, 45.124932],
          [-93.522176, 45.126595],
          [-93.522176, 45.126644],
          [-93.522173, 45.127123],
          [-93.522172, 45.127208],
          [-93.522171, 45.127434],
          [-93.522171, 45.127472],
          [-93.522174, 45.127886],
          [-93.52217, 45.128185],
          [-93.52212, 45.130756],
          [-93.52212, 45.130783],
          [-93.522116, 45.13099],
          [-93.522114, 45.131094],
          [-93.522114, 45.131094],
          [-93.522278, 45.131094],
          [-93.523259, 45.131093],
          [-93.528175, 45.131087],
          [-93.530315, 45.131086],
          [-93.53119, 45.131089],
          [-93.531898, 45.131092],
          [-93.53252, 45.131105],
          [-93.532756, 45.131109],
          [-93.533513, 45.131129],
          [-93.533994, 45.131142],
          [-93.534281, 45.131148],
          [-93.534294, 45.131149],
          [-93.534737, 45.13115],
          [-93.534896, 45.131145],
          [-93.535866, 45.131115],
          [-93.536651, 45.131096],
          [-93.537457, 45.131086],
          [-93.538939, 45.131084],
          [-93.54088, 45.131093],
          [-93.541837, 45.131087],
          [-93.541963, 45.131086],
          [-93.543027, 45.131077],
          [-93.543054, 45.131077],
          [-93.543131, 45.131077],
          [-93.544146, 45.131082],
          [-93.547521, 45.131097],
          [-93.548256, 45.131095],
          [-93.549518, 45.131066],
          [-93.549991, 45.131056],
          [-93.551022, 45.131031],
          [-93.554123, 45.131011],
          [-93.556145, 45.131001],
          [-93.558777, 45.130981],
          [-93.560163, 45.130972],
          [-93.561026, 45.130966],
          [-93.561961, 45.13096],
          [-93.562734, 45.130955],
          [-93.563856, 45.130948],
          [-93.564186, 45.130948],
          [-93.567719, 45.130938],
          [-93.568342, 45.130936],
          [-93.568768, 45.130933],
          [-93.569167, 45.130932],
          [-93.570697, 45.130926],
          [-93.571333, 45.130921],
          [-93.573194, 45.130918],
          [-93.575356, 45.130909],
          [-93.57672, 45.130905],
          [-93.577017, 45.130904],
          [-93.577378, 45.130902],
          [-93.578806, 45.130897],
          [-93.581171, 45.130889],
          [-93.582216, 45.130884],
          [-93.584677, 45.130878],
          [-93.586197, 45.130876],
          [-93.588142, 45.130877],
          [-93.589215, 45.130879],
          [-93.590686, 45.130877],
          [-93.59113, 45.130879],
          [-93.591909, 45.130879],
          [-93.592271, 45.130878],
          [-93.593679, 45.130877],
          [-93.594697, 45.130879],
          [-93.595221, 45.130879],
          [-93.595661, 45.130879],
          [-93.59805, 45.130878],
          [-93.601733, 45.130871],
          [-93.602076, 45.130871],
          [-93.605133, 45.130875],
          [-93.612167, 45.130852],
          [-93.614295, 45.130852],
          [-93.615397, 45.13085],
          [-93.620884, 45.130834],
          [-93.62537, 45.130822],
          [-93.630839, 45.130802],
          [-93.633558, 45.130792],
          [-93.634047, 45.130791],
          [-93.634798, 45.130783],
          [-93.63554, 45.130776],
          [-93.635696, 45.130775],
          [-93.635678, 45.132684],
          [-93.635668, 45.133731],
          [-93.635628, 45.137744],
          [-93.635632, 45.138076],
          [-93.635631, 45.138132],
          [-93.635553, 45.142489],
          [-93.635529, 45.143916],
          [-93.635521, 45.14437],
          [-93.635505, 45.145295],
          [-93.635505, 45.14534],
          [-93.635488, 45.146511],
          [-93.63548, 45.147062],
          [-93.63546, 45.148467],
          [-93.635435, 45.150181],
          [-93.635424, 45.150918],
          [-93.635422, 45.151051],
          [-93.635422, 45.151271],
          [-93.635412, 45.151298],
          [-93.635359, 45.15144],
          [-93.635359, 45.15166],
          [-93.635346, 45.151748],
          [-93.635344, 45.151883],
          [-93.635341, 45.152335],
          [-93.635344, 45.152549],
          [-93.635252, 45.152549],
          [-93.634452, 45.152552],
          [-93.632383, 45.152559],
          [-93.630424, 45.152565],
          [-93.630098, 45.152568],
          [-93.625165, 45.152581],
          [-93.625097, 45.152581],
          [-93.618443, 45.152628],
          [-93.616361, 45.152633],
          [-93.615021, 45.152643],
          [-93.614754, 45.152645],
          [-93.613639, 45.152652],
          [-93.612139, 45.152664],
          [-93.611349, 45.152668],
          [-93.610996, 45.15267],
          [-93.608488, 45.152689],
          [-93.607513, 45.152694],
          [-93.604436, 45.15271],
          [-93.604424, 45.15271],
          [-93.601173, 45.152698],
          [-93.600588, 45.152697],
          [-93.599333, 45.152695],
          [-93.599304, 45.152695],
          [-93.599265, 45.152696],
          [-93.599075, 45.152699],
          [-93.598907, 45.152683],
          [-93.598648, 45.15266],
          [-93.598222, 45.152603],
          [-93.598114, 45.152599],
          [-93.597846, 45.152548],
          [-93.597733, 45.152527],
          [-93.597351, 45.152435],
          [-93.596985, 45.152325],
          [-93.596954, 45.152315],
          [-93.595703, 45.151905],
          [-93.595299, 45.151787],
          [-93.594887, 45.151688],
          [-93.59446, 45.151615],
          [-93.594025, 45.151566],
          [-93.59359, 45.151543],
          [-93.593155, 45.151539],
          [-93.59272, 45.151566],
          [-93.592285, 45.151611],
          [-93.591431, 45.151733],
          [-93.590813, 45.151825],
          [-93.590385, 45.1519],
          [-93.590202, 45.151932],
          [-93.58801, 45.152327],
          [-93.587207, 45.152476],
          [-93.586716, 45.152565],
          [-93.586273, 45.152634],
          [-93.585823, 45.152672],
          [-93.585373, 45.152687],
          [-93.583785, 45.152695],
          [-93.583778, 45.152695],
          [-93.58189, 45.152696],
          [-93.581492, 45.152697],
          [-93.580637, 45.152697],
          [-93.579916, 45.152698],
          [-93.578852, 45.1527],
          [-93.574923, 45.152703],
          [-93.574075, 45.152703],
          [-93.573472, 45.152704],
          [-93.572697, 45.152711],
          [-93.56949, 45.152738],
          [-93.568997, 45.152745],
          [-93.568292, 45.15275],
          [-93.56792, 45.152753],
          [-93.566838, 45.152764],
          [-93.565737, 45.152775],
          [-93.565224, 45.152779],
          [-93.564986, 45.152779],
          [-93.563809, 45.152787],
          [-93.563175, 45.152791],
          [-93.558006, 45.152794],
          [-93.557296, 45.152789],
          [-93.555346, 45.152797],
          [-93.555305, 45.152797],
          [-93.555068, 45.152798],
          [-93.553932, 45.152795],
          [-93.552818, 45.152798],
          [-93.548936, 45.1528],
          [-93.546536, 45.1528],
          [-93.542509, 45.152802],
          [-93.54251, 45.152744],
          [-93.54254, 45.151461],
          [-93.542561, 45.150098],
          [-93.542563, 45.150044],
          [-93.542578, 45.149699],
          [-93.542617, 45.147968],
          [-93.542632, 45.14745],
          [-93.542652, 45.146689],
          [-93.54266, 45.146309],
          [-93.54267, 45.145949],
          [-93.54268, 45.145546],
          [-93.542703, 45.144616],
          [-93.542718, 45.143859],
          [-93.542745, 45.142798],
          [-93.542842, 45.138781],
          [-93.542852, 45.138356],
          [-93.542852, 45.138311],
          [-93.54286, 45.138062],
          [-93.542871, 45.137528],
          [-93.542901, 45.136488],
          [-93.542917, 45.135583],
          [-93.542925, 45.135319],
          [-93.543008, 45.132467],
          [-93.543043, 45.131937],
          [-93.543052, 45.131556],
          [-93.543052, 45.131535],
          [-93.543056, 45.131281],
          [-93.543054, 45.131077],
          [-93.54305, 45.130937],
          [-93.543049, 45.130906],
          [-93.543048, 45.130718],
          [-93.543042, 45.12982],
          [-93.543052, 45.128901],
          [-93.543061, 45.128114],
          [-93.543086, 45.12695],
          [-93.543096, 45.126244],
          [-93.543108, 45.125304],
          [-93.543118, 45.124621],
          [-93.543129, 45.123806],
          [-93.543115, 45.122845],
          [-93.5431, 45.121763],
          [-93.543093, 45.121233],
          [-93.543088, 45.120896],
          [-93.543068, 45.11951],
          [-93.543079, 45.118943],
          [-93.543078, 45.11881],
          [-93.543053, 45.116954],
          [-93.543016, 45.109306],
          [-93.543012, 45.105742],
          [-93.543008, 45.10562],
          [-93.543005, 45.104109],
          [-93.543005, 45.103857],
          [-93.543004, 45.103335],
          [-93.543001, 45.102014],
          [-93.543002, 45.100981],
          [-93.543002, 45.100012],
          [-93.543, 45.0997],
          [-93.543001, 45.098811],
          [-93.542999, 45.098361],
          [-93.542998, 45.097508],
          [-93.542998, 45.097352],
          [-93.542999, 45.096084],
          [-93.542977, 45.095521],
          [-93.542977, 45.095444],
          [-93.542976, 45.09483],
          [-93.542977, 45.094695],
          [-93.542985, 45.093921],
          [-93.542985, 45.093896],
          [-93.542987, 45.093657],
          [-93.542987, 45.093628],
          [-93.542986, 45.093465],
          [-93.542985, 45.093342],
          [-93.542985, 45.093284],
          [-93.542986, 45.093043],
          [-93.542987, 45.092574],
          [-93.542988, 45.09203],
          [-93.543017, 45.090723],
          [-93.543017, 45.090709],
          [-93.542996, 45.089803],
          [-93.543007, 45.087657],
          [-93.54261, 45.087684],
          [-93.54057, 45.087825],
          [-93.539839, 45.087818],
          [-93.539617, 45.087804],
          [-93.539314, 45.087776],
          [-93.53891, 45.087727],
          [-93.538155, 45.08762],
          [-93.537659, 45.08757],
          [-93.53717, 45.08754],
          [-93.536965, 45.087533],
          [-93.536674, 45.087524],
          [-93.5348, 45.08751],
          [-93.532524, 45.087494],
          [-93.531508, 45.087485],
          [-93.5301, 45.087478],
          [-93.530014, 45.087549],
          [-93.529831, 45.087511],
          [-93.529648, 45.087488],
          [-93.529479, 45.08748],
          [-93.527092, 45.087437],
          [-93.526559, 45.087402],
          [-93.524699, 45.087253],
          [-93.524607, 45.087246],
          [-93.5234, 45.08714],
          [-93.523384, 45.087139],
          [-93.522934, 45.087118],
          [-93.522512, 45.087105],
          [-93.522227, 45.087109],
          [-93.522224, 45.087109],
          [-93.522123, 45.08711],
          [-93.522039, 45.087118],
          [-93.521708, 45.087082],
          [-93.520558, 45.087053],
          [-93.520104, 45.086998],
          [-93.519716, 45.086921],
          [-93.519561, 45.086885],
          [-93.519104, 45.086782],
          [-93.518976, 45.086734],
          [-93.518768, 45.086658],
          [-93.518611, 45.0866],
          [-93.518235, 45.086421],
          [-93.518213, 45.086409],
          [-93.518101, 45.08635],
          [-93.517857, 45.08622],
          [-93.517673, 45.086102],
          [-93.517385, 45.0859],
          [-93.517295, 45.085843],
          [-93.517129, 45.085738],
          [-93.517005, 45.085659],
          [-93.516839, 45.085548],
          [-93.516423, 45.085273],
          [-93.516197, 45.085119],
          [-93.51576, 45.084838],
          [-93.515339, 45.084563],
          [-93.514921, 45.084293],
          [-93.51446, 45.083984],
          [-93.514177, 45.083802],
          [-93.514039, 45.083719],
          [-93.51386, 45.083613],
          [-93.513653, 45.083499],
          [-93.513601, 45.083468],
          [-93.513477, 45.08341],
          [-93.513356, 45.083343],
          [-93.513051, 45.083189],
          [-93.512837, 45.083091],
          [-93.51243, 45.082922],
          [-93.512254, 45.082855],
          [-93.511988, 45.082759],
          [-93.511559, 45.082613],
          [-93.511349, 45.082554],
          [-93.511051, 45.082469],
          [-93.510818, 45.082408],
          [-93.510642, 45.082367],
          [-93.510261, 45.082287],
          [-93.51003, 45.082247],
          [-93.509785, 45.082202],
          [-93.509448, 45.082148],
          [-93.509033, 45.082096],
          [-93.508681, 45.082067],
          [-93.508037, 45.082002],
          [-93.50726, 45.081933],
          [-93.507134, 45.081924],
          [-93.507009, 45.081913],
          [-93.506636, 45.081909],
          [-93.506167, 45.081921],
          [-93.505782, 45.081957],
          [-93.505389, 45.082014],
          [-93.504969, 45.082097],
          [-93.504472, 45.082229],
          [-93.50413, 45.082333],
          [-93.503767, 45.082439],
          [-93.503461, 45.082511],
          [-93.503116, 45.082584],
          [-93.502721, 45.082641],
          [-93.502378, 45.082676],
          [-93.502366, 45.082677],
          [-93.502296, 45.082681],
          [-93.5021, 45.082696],
          [-93.502105, 45.082821],
          [-93.502112, 45.082942],
          [-93.502105, 45.083092],
          [-93.502103, 45.083192],
          [-93.502093, 45.083645],
          [-93.50209, 45.083771],
          [-93.502082, 45.083909],
          [-93.502069, 45.084185],
          [-93.502035, 45.084941],
          [-93.502029, 45.085183],
          [-93.502029, 45.085185],
          [-93.502027, 45.085408],
          [-93.502021, 45.086208],
          [-93.502015, 45.086954],
          [-93.502014, 45.087295],
          [-93.502035, 45.088335],
          [-93.502075, 45.089024],
          [-93.502082, 45.089111],
          [-93.502087, 45.089186],
          [-93.502124, 45.089602],
          [-93.502141, 45.090054],
          [-93.50216, 45.090928],
          [-93.502164, 45.091038],
          [-93.502174, 45.091326],
          [-93.502117, 45.09179],
          [-93.502103, 45.092428],
          [-93.502082, 45.092663],
          [-93.502033, 45.09294],
          [-93.50196, 45.093208],
          [-93.501862, 45.093456],
          [-93.501795, 45.093588],
          [-93.501726, 45.093725],
          [-93.501642, 45.093866],
          [-93.501575, 45.093979],
          [-93.501495, 45.094086],
          [-93.501396, 45.094217],
          [-93.501332, 45.09429],
          [-93.501195, 45.094446],
          [-93.500965, 45.094679],
          [-93.500872, 45.094771],
          [-93.500751, 45.094863],
          [-93.500649, 45.094939],
          [-93.500392, 45.095129],
          [-93.500017, 45.095349],
          [-93.499593, 45.095569],
          [-93.499193, 45.095729],
          [-93.498777, 45.095865],
          [-93.498421, 45.095965],
          [-93.498055, 45.096047],
          [-93.496934, 45.09625],
          [-93.496045, 45.09642],
          [-93.49563, 45.096505],
          [-93.49552, 45.096537],
          [-93.495495, 45.096545],
          [-93.495172, 45.09664],
          [-93.495014, 45.096696],
          [-93.494746, 45.096793],
          [-93.494418, 45.096936],
          [-93.494105, 45.097102],
          [-93.493809, 45.097277],
          [-93.493608, 45.097421],
          [-93.493513, 45.097489],
          [-93.493308, 45.097633],
          [-93.493096, 45.097818],
          [-93.492879, 45.098046],
          [-93.492692, 45.098277],
          [-93.49252, 45.098531],
          [-93.492361, 45.098779],
          [-93.492244, 45.099042],
          [-93.492147, 45.099315],
          [-93.492103, 45.099485],
          [-93.492078, 45.099582],
          [-93.492043, 45.099843],
          [-93.492019, 45.100123],
          [-93.492009, 45.100222],
          [-93.492008, 45.100232],
          [-93.491965, 45.100699],
          [-93.491947, 45.101009],
          [-93.49191, 45.101394],
          [-93.491876, 45.101744],
          [-93.491867, 45.101872],
          [-93.491867, 45.101875],
          [-93.491858, 45.10198],
          [-93.491848, 45.102159],
          [-93.491854, 45.102339],
          [-93.491854, 45.102341],
          [-93.491863, 45.102517],
          [-93.491884, 45.102711],
          [-93.491895, 45.102776],
          [-93.49191, 45.102864],
          [-93.491937, 45.103026],
          [-93.491977, 45.103202],
          [-93.492014, 45.103367],
          [-93.492059, 45.103568],
          [-93.492082, 45.103673],
          [-93.492094, 45.103757],
          [-93.492101, 45.103986],
          [-93.49216, 45.104065],
          [-93.492166, 45.104267],
          [-93.492179, 45.104663],
          [-93.492188, 45.105359],
          [-93.492199, 45.105928],
          [-93.492235, 45.107992],
          [-93.492242, 45.108424],
          [-93.492252, 45.109033],
          [-93.49226, 45.109122],
          [-93.49226, 45.109127],
          [-93.492402, 45.109132],
          [-93.494698, 45.109117],
          [-93.494814, 45.109145],
          [-93.494852, 45.109165],
          [-93.494906, 45.109209],
          [-93.494932, 45.109243],
          [-93.494944, 45.109279],
          [-93.494944, 45.109322],
          [-93.49493, 45.109365],
          [-93.494875, 45.109509],
          [-93.494745, 45.10983],
          [-93.49469, 45.110029]
];

// Initialize Mapbox map
const map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/streets-v11',
    center: [-93.57551398513115, 45.11561193912041],
    zoom: 11,
});


// Definitions for runner, walker, and jogger
const runner = { id: 1, mode: 'Running', color: 'red', speed: 10, location: routeCoordinates[0].slice(), routeIndex: 0 };
const walker = { id: 2, mode: 'Walking', color: 'green', speed: 3, location: routeCoordinates[0].slice(), routeIndex: 0 };
const jogger = { id: 3, mode: 'Jogging', color: 'blue', speed: 6, location: routeCoordinates[0].slice(), routeIndex: 0 };

// Combine the individual arrays into a single array
const peopleData = [runner, walker, jogger];

const routeLine = {
        'type': 'Feature',
        'properties': {},
        'geometry': {
            'type': 'LineString',
            'coordinates': routeCoordinates
        }
    };

// Add GeoJSON source for people
map.on('load', () => {
    map.addSource('people', {
        type: 'geojson',
        data: {
            type: 'FeatureCollection',
            features: peopleData.map(person => ({
                type: 'Feature',
                geometry: {
                    type: 'Point',
                    coordinates: person.location,
                },
                properties: {
                    id: person.id,
                    mode: person.mode,
                    color: person.color,
                },
            })),
        },
        
    });

    // Add the route line as a source
    map.addSource('route', {
        'type': 'geojson',
        'data': routeLine
    });

    map.addLayer({
        'id': 'routeLine',
        'type': 'line',
        'source': 'route',
        'layout': {
            'line-join': 'round',
            'line-cap': 'round'
        },
        'paint': {
            'line-color': '#000000', // Use any color you like
            'line-width': 4
        }
    });

    // Add layers for runner, walker, and jogger
    map.addLayer({
        id: 'runner',
        type: 'circle',
        source: 'people',
        filter: ['==', ['get', 'mode'], 'Running'],
        paint: {
            'circle-radius': 8,
            'circle-color': runner.color,
        },
    });

    map.addLayer({
        id: 'walker',
        type: 'circle',
        source: 'people',
        filter: ['==', ['get', 'mode'], 'Walking'],
        paint: {
            'circle-radius': 6,
            'circle-color': walker.color,
        },
    });

    map.addLayer({
        id: 'jogger',
        type: 'circle',
        source: 'people',
        filter: ['==', ['get', 'mode'], 'Jogging'],
        paint: {
            'circle-radius': 7,
            'circle-color': jogger.color,
        },
    });

    // Start simulating movement
    simulateMovement();
});

function simulateMovement() {
    setInterval(() => {
        peopleData.forEach(person => {
            // Move each person along the route based on their speed
            updatePersonLocation(person);

            // Update the GeoJSON data source to reflect new locations
            map.getSource('people').setData({
                type: 'FeatureCollection',
                features: peopleData.map(person => ({
                    type: 'Feature',
                    geometry: {
                        type: 'Point',
                        coordinates: person.location,
                    },
                    properties: {
                        id: person.id,
                        mode: person.mode,
                        color: person.color,
                    },
                })),
            });
        });
    }, 1000); // Update every second
}

// Speed definitions (the unit could be 'points per update interval')
const runnerSpeed = 5; // Runner moves 5 points each interval
const walkerSpeed = 2; // Walker moves 2 points each interval
const joggerSpeed = 3; // Jogger moves 3 points each interval

// Assign speeds to runner, walker, and jogger
runner.speed = runnerSpeed;
walker.speed = walkerSpeed;
jogger.speed = joggerSpeed;


function simulateMovement() {
    setInterval(() => {
        peopleData.forEach(person => {
            // Move each person along the route based on their speed
            updatePersonLocation(person);

            // Update the GeoJSON data source to reflect new locations
            map.getSource('people').setData({
                type: 'FeatureCollection',
                features: peopleData.map(person => ({
                    type: 'Feature',
                    geometry: {
                        type: 'Point',
                        coordinates: person.location,
                    },
                    properties: {
                        id: person.id,
                        mode: person.mode,
                        color: person.color,
                    },
                })),
            });
        });
    }, 1000); // Update every second
}

function updatePersonLocation(person) {
    // Increment the person's routeIndex based on their speed
    person.routeIndex += person.speed;

    // Ensure routeIndex loops back to the start if it exceeds the route length
    person.routeIndex = person.routeIndex % routeCoordinates.length;

    // Update the person's location to the next point in the routeCoordinates
    person.location = routeCoordinates[person.routeIndex].slice();
}


</script>

</body>
</html>
